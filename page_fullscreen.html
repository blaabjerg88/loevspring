<!DOCTYPE html>
<html lang="da">
    <title>&nbsp;</title>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes, maximum-scale=3, minimum-scale=1">
        <link rel="stylesheet" href="res/style/themes/loevspring.css" />
        <link rel="stylesheet" href="res/style/themes/jquery.mobile.icons.min.css" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.0/jquery.mobile.structure-1.4.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.4.0/jquery.mobile-1.4.0.min.js"></script>
        <script type="text/javascript" charset="utf-8" src="res/js/cordova.js"></script>
        <link rel="stylesheet" href="res/style/custom.css" />
        <script src="res/js/hammer.js"></script>
        <script src="res/js/hammer.fakemultitouch.js"></script>
        <script src="res/js/hammer.showtouches.js"></script>
        <script src="res/js/custom.js"></script>
    </head>
    <body>


<!--############### Page ################################-->
        <div data-role="page" id="pageFullscreen">

            <!-- header -->
            <div data-role="header" data-position="fixed">
                <a onclick="window.location.href = 'menu.html';" href="menu.html" class="ui-btn-left ui-btn-corner-all ui-btn ui-icon-grid ui-btn-icon-notext ui-shadow" title=" Navigation " data-form="ui-icon" data-role="button" role="button"> Navigation </a>
                <h1>Billede</h1>
            </div>
            <!-- /header -->

            <!-- content    -->
            <div data-role="content" id="imageFullscreenContainer">
                <div id="fullscreenImage">
                    <img id="image" class="fullscreenImage" src="" alt="" style="">
                    <div id="fullscreenText"></div>
                </div>
            </div>
            <!-- /content -->

            <footer data-role="footer" data-position="fixed">
                <div>
                    <img id="imgZoomOut" src="res/images/zoomout.png" onclick="ZoomOut()">
                    <img id="imgZoomIn" src="res/images/zoomin.png" onclick="ZoomIn()">
                    <img id="imgFullScreenComment" src="res/images/chat.png">
                </div>
            </footer>

        </div><!-- /page -->
<!--############### Page end ############################-->

    </body>
</html>

<!-- SetImage -->
            <script>

            function getFullscreenImage(image){
                console.log(image);
                var data = image.data;
                var settings = getAppSettings;

                var imgPath = getAppSettings().server_url + getAppSettings().images_path + data[0].path_full;
                console.log(imgPath);

                var description = data[0].description;
                console.log(description);

                document.getElementById('image').src = imgPath;
                document.getElementById('fullscreenText').innerHTML = "<span>" + description + "</span>";
            }

            </script>

            <!-- /SetImage -->

            <script>

            $( 'div' ).on( 'pageshow',function(event, ui){
                console.log( 'Page loaded!');
                var pictureId = localStorage.getItem('image_Id');
                callWebservice('method=getImage&image_id=' + pictureId, 'getFullscreenImage');
            });

            $( 'div' ).on( 'pagehide',function(event, ui){
                console.log( 'Page hidden!');
            });

            $("#imgFullScreenComment").click(function(){
                localStorage.setItem('isComment', true);
                window.location.href = 'page_feedback.html';
                });
            </script>

            <script>

                if(!Hammer.HAS_TOUCHEVENTS && !Hammer.HAS_POINTEREVENTS) {
                Hammer.plugins.showTouches();
                }

                if(!Hammer.HAS_TOUCHEVENTS && !Hammer.HAS_POINTEREVENTS) {
                    Hammer.plugins.fakeMultitouch();
                }

                var hammertime = Hammer(document.getElementById('groupPlan'), {
                    transform_always_block: true,
                    transform_min_scale: 1,
                    drag_block_horizontal: true,
                    drag_block_vertical: true,
                    drag_min_distance: 0
                });


                var image = document.getElementById('image');

                var posX=0, posY=0,
                last_posX=0, last_posY=0,
                scale=1;

                hammertime.on('drag dragend', function(ev) {
                switch(ev.type) {

                    case 'drag':
                        posX = last_posX + ev.gesture.deltaX;
                        posY = last_posY + ev.gesture.deltaY;
                        Transform();
                        break;

                    case 'dragend':
                        last_posX = posX;
                        last_posY = posY;
                        Transform();
                        break;
                }
                });

            function Transform()
            {
                var transform =
                    "translate3d("+posX+"px,"+posY+"px, 0) " +
                    "scale3d("+scale+","+scale+", 1) ";

                image.style.transform = transform;
                image.style.oTransform = transform;
                image.style.msTransform = transform;
                image.style.mozTransform = transform;
                image.style.webkitTransform = transform;
            }

            function ZoomIn(){
                scale = scale + 1;
                if(scale > 5)
                {
                    scale = 5;
                }
                Transform();
            }
            function ZoomOut(){
                scale = scale - 1;
                if(scale < 1)
                {
                    scale = 1;
                }
                Transform();
            }
            
            </script>
